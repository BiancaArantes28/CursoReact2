{"ast":null,"code":"import _assertThisInitialized from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\src\\\\Livro.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport PubSub from 'pubsub-js';\nimport InputCustomizado from './componentes/InputCustomizado';\nimport SelectCustomizado from './componentes/SelectCustomizado';\nimport ButtonCustomizado from './componentes/ButtonCustomizado';\nimport TratadorErros from './TratadorErros';\n\nvar TabelaLivros =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TabelaLivros, _Component);\n\n  function TabelaLivros() {\n    _classCallCheck(this, TabelaLivros);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TabelaLivros).apply(this, arguments));\n  }\n\n  _createClass(TabelaLivros, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 13\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"pure-table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 14\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 15\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 16\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17\n        },\n        __self: this\n      }, \"T\\xEDtulo\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 18\n        },\n        __self: this\n      }, \"Pre\\xE7o\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19\n        },\n        __self: this\n      }, \"Autor\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, this.props.livros.map(function (livro) {\n        return React.createElement(\"tr\", {\n          key: livro.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27\n          },\n          __self: this\n        }, livro.titulo), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28\n          },\n          __self: this\n        }, livro.preco), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        }, livro.autor.nome));\n      }))));\n    }\n  }]);\n\n  return TabelaLivros;\n}(Component);\n\nvar FormularioLivro =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(FormularioLivro, _Component2);\n\n  function FormularioLivro() {\n    var _this;\n\n    _classCallCheck(this, FormularioLivro);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormularioLivro).call(this));\n    _this.state = {\n      titulo: '',\n      preco: 0.0,\n      autor: '',\n      autores: []\n    };\n    _this.enviaForm = _this.enviaForm.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setTitulo = _this.setTitulo.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setPreco = _this.setPreco.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setAutor = _this.setAutor.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(FormularioLivro, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $.ajax({\n        url: \"http://cdc-react.herokuapp.com/api/autores\",\n        dataType: \"json\",\n        success: function (resposta) {\n          this.setState({\n            autores: resposta\n          });\n        }.bind(this)\n      });\n    }\n  }, {\n    key: \"setTitulo\",\n    value: function setTitulo(evento) {\n      console.log(evento);\n      this.setState({\n        titulo: evento.target.value\n      });\n    }\n  }, {\n    key: \"setPreco\",\n    value: function setPreco(evento) {\n      this.setState({\n        preco: evento.target.value\n      });\n    }\n  }, {\n    key: \"setAutor\",\n    value: function setAutor(evento) {\n      this.setState({\n        autor: evento.target.value\n      });\n    }\n  }, {\n    key: \"enviaForm\",\n    value: function enviaForm(evento) {\n      evento.preventDefault();\n      $.ajax({\n        url: 'http://cdc-react.herokuapp.com/api/livros',\n        contentType: 'application/json',\n        dataType: 'json',\n        type: 'post',\n        data: JSON.stringify({\n          titulo: this.state.titulo,\n          preco: this.state.preco,\n          autorId: this.state.autor\n        }),\n        success: function (novaListagem) {\n          PubSub.publish('atualiza-lista-livros', novaListagem);\n          this.setState({\n            titulo: '',\n            preco: null,\n            autor: ''\n          });\n        }.bind(this),\n        error: function error(resposta) {\n          if (resposta.status === 400) {\n            new TratadorErros().publicaErros(resposta.responseJSON);\n          }\n        },\n        beforeSend: function beforeSend() {\n          PubSub.publish(\"limpa-erros\", {});\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"pure-form pure-form-aligned\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"pure-form pure-form-aligned\",\n        onSubmit: this.enviaForm,\n        method: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(InputCustomizado, {\n        id: \"titulo\",\n        type: \"text\",\n        name: \"titulo\",\n        value: this.state.titulo,\n        onChange: this.setTitulo,\n        label: \"Titulo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(InputCustomizado, {\n        id: \"preco\",\n        type: \"number\",\n        name: \"preco\",\n        value: this.state.precoo,\n        onChange: this.setPreco,\n        label: \"Pre\\xE7o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(SelectCustomizado, {\n        id: \"autorId\",\n        name: \"autorId\",\n        onChange: this.setAutor,\n        value: this.state.autor,\n        autores: this.state.autores,\n        label: \"Autor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(ButtonCustomizado, {\n        type: \"submit\",\n        button: \"Gravar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return FormularioLivro;\n}(Component);\n\nvar LivrosBox =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(LivrosBox, _Component3);\n\n  function LivrosBox() {\n    var _this2;\n\n    _classCallCheck(this, LivrosBox);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(LivrosBox).call(this));\n    _this2.state = {\n      livros: []\n    };\n    return _this2;\n  }\n\n  _createClass(LivrosBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $.ajax({\n        url: \"http://cdc-react.herokuapp.com/api/livros\",\n        dataType: \"json\",\n        success: function (resposta) {\n          this.setState({\n            livros: resposta\n          });\n        }.bind(this)\n      });\n      PubSub.subscribe('atualiza-lista-livros', function (topico, novaLista) {\n        this.setState({\n          livros: novaLista\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Lista de Livros\")), React.createElement(\"div\", {\n        className: \"content\",\n        id: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(FormularioLivro, {\n        callbackAtualizaListagem: this.atualizaListagem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(TabelaLivros, {\n        livros: this.state.livros,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return LivrosBox;\n}(Component);\n\nexport { LivrosBox as default };","map":{"version":3,"sources":["C:\\Users\\bianc\\OneDrive\\Documentos\\ProjetosCursos\\CursoReact2\\src\\Livro.js"],"names":["React","Component","$","PubSub","InputCustomizado","SelectCustomizado","ButtonCustomizado","TratadorErros","TabelaLivros","props","livros","map","livro","id","titulo","preco","autor","nome","FormularioLivro","state","autores","enviaForm","bind","setTitulo","setPreco","setAutor","ajax","url","dataType","success","resposta","setState","evento","console","log","target","value","preventDefault","contentType","type","data","JSON","stringify","autorId","novaListagem","publish","error","status","publicaErros","responseJSON","beforeSend","precoo","LivrosBox","subscribe","topico","novaLista","atualizaListagem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport PubSub from 'pubsub-js';\r\nimport InputCustomizado from './componentes/InputCustomizado';\r\nimport SelectCustomizado from './componentes/SelectCustomizado';\r\nimport ButtonCustomizado from './componentes/ButtonCustomizado';\r\nimport TratadorErros from './TratadorErros';\r\n\r\nclass TabelaLivros extends Component{\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <table className=\"pure-table\">\r\n                    <thead>\r\n                        <tr>\r\n                        <th>Título</th>\r\n                        <th>Preço</th>\r\n                        <th>Autor</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            this.props.livros.map(function(livro){\r\n                                return(\r\n                                    <tr key={livro.id}>\r\n                                        <td>{ livro.titulo }</td>\r\n                                        <td>{ livro.preco }</td>\r\n                                        <td>{ livro.autor.nome }</td>\r\n                                    </tr> \r\n                                );\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass FormularioLivro extends Component{\r\n     \r\n    constructor(){\r\n        super();\r\n        this.state = {titulo: '', preco: 0.0, autor: '', autores: []}\r\n        this.enviaForm = this.enviaForm.bind(this);\r\n        this.setTitulo = this.setTitulo.bind(this);\r\n        this.setPreco = this.setPreco.bind(this);\r\n        this.setAutor = this.setAutor.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        $.ajax({\r\n            url: \"http://cdc-react.herokuapp.com/api/autores\",\r\n            dataType: \"json\",\r\n            success: function(resposta){\r\n              this.setState({autores: resposta});\r\n            }.bind(this)\r\n        });\r\n    }\r\n\r\n    setTitulo(evento){\r\n        console.log(evento);\r\n        this.setState({titulo: evento.target.value});\r\n    }\r\n\r\n    setPreco(evento){\r\n        this.setState({preco: evento.target.value});\r\n    }\r\n\r\n    setAutor(evento){\r\n        this.setState({autor: evento.target.value});\r\n    }\r\n    enviaForm(evento){\r\n        evento.preventDefault();\r\n        $.ajax({\r\n          url: 'http://cdc-react.herokuapp.com/api/livros',\r\n          contentType: 'application/json',\r\n          dataType: 'json',\r\n          type: 'post',\r\n          data: JSON.stringify({titulo: this.state.titulo, preco: this.state.preco, autorId: this.state.autor}),\r\n          success: function(novaListagem){\r\n            PubSub.publish('atualiza-lista-livros', novaListagem);\r\n            this.setState({titulo: '', preco: null, autor: ''});\r\n          }.bind(this),\r\n          error: function(resposta){\r\n            if(resposta.status === 400){\r\n              new TratadorErros().publicaErros(resposta.responseJSON);\r\n            }\r\n          },\r\n          beforeSend: function(){\r\n            PubSub.publish(\"limpa-erros\", {});\r\n          }\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"pure-form pure-form-aligned\">\r\n                <form className=\"pure-form pure-form-aligned\" onSubmit={this.enviaForm} method=\"post\">\r\n                    <InputCustomizado id=\"titulo\" type=\"text\" name=\"titulo\" value={this.state.titulo} onChange={this.setTitulo} label=\"Titulo\" />\r\n                    <InputCustomizado id=\"preco\" type=\"number\" name=\"preco\" value={this.state.precoo} onChange={this.setPreco} label=\"Preço\" />\r\n                    <SelectCustomizado id=\"autorId\" name=\"autorId\" onChange={this.setAutor} value={this.state.autor} autores={this.state.autores} label=\"Autor\"/>\r\n                    <ButtonCustomizado type=\"submit\" button=\"Gravar\" />\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default class LivrosBox extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {livros: []};\r\n    }\r\n\r\n    componentDidMount(){\r\n        $.ajax({\r\n            url: \"http://cdc-react.herokuapp.com/api/livros\",\r\n            dataType: \"json\",\r\n            success: function(resposta){\r\n              this.setState({livros: resposta});\r\n            }.bind(this)\r\n        });\r\n        PubSub.subscribe('atualiza-lista-livros', function(topico, novaLista){\r\n            this.setState({livros: novaLista});\r\n        }.bind(this));\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <div className=\"header\">\r\n                    <h1>Lista de Livros</h1>\r\n                </div>\r\n                <div className=\"content\" id=\"content\">\r\n                    <FormularioLivro callbackAtualizaListagem={this.atualizaListagem}/>\r\n                    <TabelaLivros livros={this.state.livros}/>\r\n                </div>\r\n            </div> \r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}