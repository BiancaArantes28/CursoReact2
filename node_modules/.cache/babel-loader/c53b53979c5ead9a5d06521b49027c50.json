{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\src\\\\FormValidacao.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport PubSub from 'pubsub-js';\nvar emailRegex = RegExp(/^[a-z0-9.]+@[a-z0-9]+\\.[a-z]+\\.([a-z]+)?$/);\n\nvar formValid = function formValid(formErrors) {\n  var valid = true;\n  Object.values(formErrors).forEach(function (val) {\n    val.length > 0 && (valid = false);\n  });\n  return valid;\n};\n\nvar FormValidacao =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FormValidacao, _Component);\n\n  function FormValidacao(props) {\n    var _this;\n\n    _classCallCheck(this, FormValidacao);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormValidacao).call(this, props));\n\n    _this.handleChange = function (e) {\n      e.preventDefault();\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n      var formErrors = _this.state.formErrors;\n\n      switch (name) {\n        case \"titulo\":\n          formErrors.titulo = value.length < 3 && value.length > 0 ? 'Minimo de 3 caracteres!' : '';\n          break;\n\n        case \"preco\":\n          formErrors.preco = value.length < 0 ? 'Este campo é obrigatório' : '';\n          break;\n\n        case \"autor\":\n          formErrors.autor = value === \"\" ? 'Escolha uma opção' : '';\n          break;\n      }\n\n      _this.setState(_defineProperty({\n        formErrors: formErrors\n      }, name, value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      $(\".danger\").css({\n        \"display\": \"none\"\n      });\n      $(\".success\").css({\n        \"display\": \"none\"\n      });\n\n      if (formValid(_this.state.formErrors)) {\n        $.ajax({\n          url: 'http://cdc-react.herokuapp.com/api/livros',\n          contentType: 'application/json',\n          dataType: 'json',\n          type: 'post',\n          data: JSON.stringify({\n            titulo: _this.state.titulo,\n            preco: _this.state.preco,\n            autorId: _this.state.autor\n          }),\n          success: function (novaListagem) {\n            PubSub.publish('atualiza-lista-livros', novaListagem);\n            this.setState({\n              titulo: '',\n              preco: null,\n              autor: ''\n            });\n            $(\".success\").css({\n              \"display\": \"block\"\n            });\n          }.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n          error: function error(resposta) {\n            if (resposta.status === 400) {\n              //new TratadorErros().publicaErros(resposta.responseJSON);\n              $(\".danger\").css({\n                \"display\": \"block\"\n              });\n            }\n          },\n          beforeSend: function beforeSend() {\n            PubSub.publish(\"limpa-erros\", {});\n          }\n        });\n      } else {\n        $(\".danger\").css({\n          \"display\": \"block\"\n        });\n      }\n    };\n\n    _this.state = {\n      titulo: null,\n      preco: null,\n      autor: '',\n      autores: [],\n      formErrors: {\n        titulo: '',\n        preco: '',\n        autor: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(FormValidacao, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $.ajax({\n        url: \"http://cdc-react.herokuapp.com/api/autores\",\n        dataType: \"json\",\n        success: function (resposta) {\n          this.setState({\n            autores: resposta\n          });\n        }.bind(this)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var formErrors = this.state.formErrors;\n      return React.createElement(\"div\", {\n        id: \"layout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Voc\\xEA possui alguns erros, por favor, confira o seu formul\\xE1rio\"), React.createElement(\"span\", {\n        className: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Cadastrado com sucesso!\"), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Create Account\"), React.createElement(\"div\", {\n        className: \"pure-form pure-form-aligned\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"pure-form pure-form-aligned\",\n        onSubmit: this.handleSubmit,\n        noValidate: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pure-control-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"titulo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"T\\xEDtulo\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: formErrors.titulo.length > 0 ? \"has-error\" : null,\n        placeholder: \"First Name\",\n        name: \"titulo\",\n        noValidate: true,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), formErrors.titulo.length > 0 && React.createElement(\"span\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, formErrors.titulo)), React.createElement(\"div\", {\n        className: \"pure-control-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"preco\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Pre\\xE7o\"), React.createElement(\"input\", {\n        type: \"number\",\n        className: formErrors.preco.length > 0 ? \"has-error\" : null,\n        placeholder: \"exemple@exemple.com\",\n        name: \"preco\",\n        noValidate: true,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), formErrors.preco.length > 0 && React.createElement(\"span\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, formErrors.preco)), React.createElement(\"div\", {\n        className: \"pure-control-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"autor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Autor\"), React.createElement(\"select\", {\n        value: this.state.autor,\n        name: \"autor\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Selecione\"), this.state.autores.map(function (autor) {\n        return React.createElement(\"option\", {\n          key: autor.id,\n          value: autor.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, autor.nome);\n      })), formErrors.autor === \"\" && React.createElement(\"span\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, formErrors.autor)), React.createElement(\"div\", {\n        className: \"createAccount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Create Account\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Already have an Account?\"))))));\n    }\n  }]);\n\n  return FormValidacao;\n}(Component);\n\nvar TabelaLivros =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(TabelaLivros, _Component2);\n\n  function TabelaLivros() {\n    _classCallCheck(this, TabelaLivros);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TabelaLivros).apply(this, arguments));\n  }\n\n  _createClass(TabelaLivros, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"pure-table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"T\\xEDtulo\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Pre\\xE7o\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Autor\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, this.props.livros.map(function (livro) {\n        return React.createElement(\"tr\", {\n          key: livro.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, livro.titulo), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, livro.preco), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, livro.autor.nome));\n      }))));\n    }\n  }]);\n\n  return TabelaLivros;\n}(Component);\n\nvar FormValidacaoBox =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(FormValidacaoBox, _Component3);\n\n  function FormValidacaoBox() {\n    var _this2;\n\n    _classCallCheck(this, FormValidacaoBox);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(FormValidacaoBox).call(this));\n    _this2.state = {\n      livros: []\n    };\n    return _this2;\n  }\n\n  _createClass(FormValidacaoBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $.ajax({\n        url: \"http://cdc-react.herokuapp.com/api/livros\",\n        dataType: \"json\",\n        success: function (resposta) {\n          this.setState({\n            livros: resposta\n          });\n        }.bind(this)\n      });\n      PubSub.subscribe('atualiza-lista-livros', function (topico, novaLista) {\n        this.setState({\n          livros: novaLista\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Lista de Livros\")), React.createElement(\"div\", {\n        className: \"content\",\n        id: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(FormValidacao, {\n        callbackAtualizaListagem: this.atualizaListagem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), React.createElement(TabelaLivros, {\n        livros: this.state.livros,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return FormValidacaoBox;\n}(Component);\n\nexport { FormValidacaoBox as default };","map":{"version":3,"sources":["C:\\Users\\bianc\\OneDrive\\Documentos\\ProjetosCursos\\CursoReact2\\src\\FormValidacao.js"],"names":["React","Component","$","PubSub","emailRegex","RegExp","formValid","formErrors","valid","Object","values","forEach","val","length","FormValidacao","props","handleChange","e","preventDefault","target","name","value","state","titulo","preco","autor","setState","handleSubmit","css","ajax","url","contentType","dataType","type","data","JSON","stringify","autorId","success","novaListagem","publish","bind","error","resposta","status","beforeSend","autores","map","id","nome","TabelaLivros","livros","livro","FormValidacaoBox","subscribe","topico","novaLista","atualizaListagem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport PubSub from 'pubsub-js';\r\n\r\nconst emailRegex = RegExp(/^[a-z0-9.]+@[a-z0-9]+\\.[a-z]+\\.([a-z]+)?$/);\r\nconst formValid = formErrors => {\r\n    let valid = true;\r\n\r\n    Object.values(formErrors).forEach( val => {\r\n        val.length > 0 && (valid = false)\r\n    });\r\n    return valid;\r\n}\r\n\r\nclass FormValidacao extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            titulo: null,\r\n            preco: null, \r\n            autor: '', \r\n            autores: [],\r\n            formErrors: {\r\n                titulo: '',\r\n                preco: '',\r\n                autor: ''\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        $.ajax({\r\n            url: \"http://cdc-react.herokuapp.com/api/autores\",\r\n            dataType: \"json\",\r\n            success: function(resposta){\r\n              this.setState({autores: resposta});\r\n            }.bind(this)\r\n        });\r\n    }\r\n\r\n    handleChange = e => {\r\n        e.preventDefault();\r\n        const { name, value } = e.target;\r\n        let formErrors = this.state.formErrors;\r\n        \r\n        switch(name){\r\n            \r\n            case \"titulo\":\r\n                formErrors.titulo = value.length < 3 && value.length > 0 \r\n                    ? 'Minimo de 3 caracteres!' \r\n                    : ''; \r\n                break;\r\n            case \"preco\":\r\n                formErrors.preco = value.length < 0\r\n                    ? 'Este campo é obrigatório' \r\n                    : ''; \r\n                break;\r\n            case \"autor\":\r\n                formErrors.autor = value === \"\" \r\n                    ? 'Escolha uma opção' \r\n                    : ''; \r\n                break;\r\n\r\n\r\n        }\r\n        this.setState({formErrors, [name]: value });\r\n    };\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        $(\".danger\").css({\"display\": \"none\"});\r\n        $(\".success\").css({\"display\": \"none\"});\r\n        if(formValid(this.state.formErrors)){\r\n            \r\n            $.ajax({\r\n                url: 'http://cdc-react.herokuapp.com/api/livros',\r\n                contentType: 'application/json',\r\n                dataType: 'json',\r\n                type: 'post',\r\n                data: JSON.stringify({titulo: this.state.titulo, preco: this.state.preco, autorId: this.state.autor}),\r\n                success: function(novaListagem){\r\n                  PubSub.publish('atualiza-lista-livros', novaListagem);\r\n                  this.setState({titulo: '', preco: null, autor: ''});\r\n                  $(\".success\").css({\"display\": \"block\"});\r\n                }.bind(this),\r\n                error: function(resposta){\r\n                  if(resposta.status === 400){\r\n                    //new TratadorErros().publicaErros(resposta.responseJSON);\r\n                    $(\".danger\").css({\"display\": \"block\"});\r\n                  }\r\n                },\r\n                beforeSend: function(){\r\n                  PubSub.publish(\"limpa-erros\", {});\r\n                }\r\n            })\r\n        }else{\r\n            $(\".danger\").css({\"display\": \"block\"});\r\n        }\r\n\r\n    }\r\n\r\n    render(){\r\n        const { formErrors } = this.state;\r\n        return(\r\n            <div id=\"layout\">\r\n                <div id=\"main\">\r\n                    <span className=\"danger\">Você possui alguns erros, por favor, confira o seu formulário</span>\r\n                    <span className=\"success\">Cadastrado com sucesso!</span>\r\n                    <h1>Create Account</h1>\r\n                    <div className=\"pure-form pure-form-aligned\">\r\n                        <form className=\"pure-form pure-form-aligned\" onSubmit={this.handleSubmit} noValidate>\r\n                            <div className=\"pure-control-group\">\r\n                                <label htmlFor=\"titulo\">Título</label>\r\n                                <input \r\n                                    type=\"text\"\r\n                                    className={formErrors.titulo.length > 0 ? \"has-error\" : null}\r\n                                    placeholder=\"First Name\"\r\n                                    name=\"titulo\"\r\n                                    noValidate \r\n                                    onChange={this.handleChange}\r\n                                />\r\n                                {formErrors.titulo.length > 0 && (\r\n                                    <span className=\"error\">{formErrors.titulo}</span>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"pure-control-group\">\r\n                                <label htmlFor=\"preco\">Preço</label>\r\n                                <input \r\n                                    type=\"number\"\r\n                                    className={formErrors.preco.length > 0 ? \"has-error\" : null}\r\n                                    placeholder=\"exemple@exemple.com\"\r\n                                    name=\"preco\"\r\n                                    noValidate \r\n                                    onChange={this.handleChange}\r\n                                />\r\n                                {formErrors.preco.length > 0 && (\r\n                                    <span className=\"error\">{formErrors.preco}</span>\r\n                                )}\r\n                            </div>\r\n                            {/* <div className=\"pure-control-group\">\r\n                                <label htmlFor=\"password\">Password</label>\r\n                                <input \r\n                                    type=\"password\"\r\n                                    className={formErrors.firstname.length > 0 ? \"has-error\" : null}\r\n                                    placeholder=\"Your password\"\r\n                                    name=\"password\"\r\n                                    noValidate \r\n                                    onChange={this.handleChange}\r\n                                />\r\n                                {formErrors.password.length > 0 && (\r\n                                    <span className=\"error\">{formErrors.password}</span>\r\n                                )}\r\n                            </div> */}\r\n                            <div className=\"pure-control-group\">\r\n                                <label htmlFor=\"autor\">Autor</label>\r\n                                <select value={this.state.autor} name=\"autor\" onChange={this.handleChange}>\r\n                                    <option value=\"\">Selecione</option>\r\n                                    {\r\n                                        this.state.autores.map(function (autor) {\r\n                                            return <option key={autor.id} value={autor.id}>\r\n                                                {autor.nome}\r\n                                            </option>;\r\n                                        })\r\n                                    }\r\n                                </select>\r\n                                {formErrors.autor === \"\" && (\r\n                                    <span className=\"error\">{formErrors.autor}</span>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"createAccount\">\r\n                                <button type=\"submit\">Create Account</button>\r\n                                <span>Already have an Account?</span>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n\r\n                    \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    \r\n}\r\n\r\n\r\nclass TabelaLivros extends Component{\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <table className=\"pure-table\">\r\n                    <thead>\r\n                        <tr>\r\n                        <th>Título</th>\r\n                        <th>Preço</th>\r\n                        <th>Autor</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            this.props.livros.map(function(livro){\r\n                                return(\r\n                                    <tr key={livro.id}>\r\n                                        <td>{ livro.titulo }</td>\r\n                                        <td>{ livro.preco }</td>\r\n                                        <td>{ livro.autor.nome }</td>\r\n                                    </tr> \r\n                                );\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default class FormValidacaoBox extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {livros: []};\r\n    }\r\n\r\n    componentDidMount(){\r\n        $.ajax({\r\n            url: \"http://cdc-react.herokuapp.com/api/livros\",\r\n            dataType: \"json\",\r\n            success: function(resposta){\r\n              this.setState({livros: resposta});\r\n            }.bind(this)\r\n        });\r\n        PubSub.subscribe('atualiza-lista-livros', function(topico, novaLista){\r\n            this.setState({livros: novaLista});\r\n        }.bind(this));\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <div className=\"header\">\r\n                    <h1>Lista de Livros</h1>\r\n                </div>\r\n                <div className=\"content\" id=\"content\">\r\n                    <FormValidacao callbackAtualizaListagem={this.atualizaListagem}/>\r\n                    <TabelaLivros livros={this.state.livros}/>\r\n                </div>\r\n            </div> \r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}