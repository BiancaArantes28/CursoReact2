{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\bianc\\\\OneDrive\\\\Documentos\\\\ProjetosCursos\\\\CursoReact2\\\\src\\\\componentes\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { history } from 'react-router-dom';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    if (_this.props.location.state) {\n      _this.state = {\n        msg: _this.props.location.state.msg\n      };\n    } else {\n      _this.state = {\n        msg: ''\n      };\n    }\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"envia\",\n    value: function envia(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var requestInfo = {\n        method: 'POST',\n        body: JSON.stringify({\n          login: this.login.value,\n          senha: this.senha.value\n        }),\n        headers: new Headers({\n          'Content-type': 'application/json'\n        })\n      };\n      fetch('https://instalura-api.herokuapp.com/api/public/login', requestInfo).then(function (response) {\n        if (response.ok) {\n          return response.text();\n        } else {\n          throw new Error('não foi possível fazer o login');\n        }\n      }).then(function (token) {\n        localStorage.setItem('auth-token', token);\n\n        _this2.props.history.push('timeline');\n      }).catch(function (error) {\n        _this2.setState({\n          msg: error.message\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"login-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, this.state.msg), React.createElement(\"h1\", {\n        className: \"header-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"Instalura\"), React.createElement(\"form\", {\n        onSubmit: this.envia.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        ref: function ref(input) {\n          return _this3.login = input;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        ref: function ref(input) {\n          return _this3.senha = input;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport { Login as default };","map":{"version":3,"sources":["C:\\Users\\bianc\\OneDrive\\Documentos\\ProjetosCursos\\CursoReact2\\src\\componentes\\Login.js"],"names":["React","Component","history","Login","props","location","state","msg","event","preventDefault","requestInfo","method","body","JSON","stringify","login","value","senha","headers","Headers","fetch","then","response","ok","text","Error","token","localStorage","setItem","push","catch","error","setState","message","envia","bind","input"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,kBAAxB;;IAEqBC,K;;;;;AACjB,iBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,+EAAMA,KAAN;;AACA,QAAG,MAAKA,KAAL,CAAWC,QAAX,CAAoBC,KAAvB,EAA6B;AACzB,YAAKA,KAAL,GAAa;AAACC,QAAAA,GAAG,EAAE,MAAKH,KAAL,CAAWC,QAAX,CAAoBC,KAApB,CAA0BC;AAAhC,OAAb;AACH,KAFD,MAEK;AACD,YAAKD,KAAL,GAAa;AAACC,QAAAA,GAAG,EAAE;AAAN,OAAb;AACH;;AANa;AAQjB;;;;0BACKC,K,EAAM;AAAA;;AACRA,MAAAA,KAAK,CAACC,cAAN;AACA,UAAMC,WAAW,GAAG;AAChBC,QAAAA,MAAM,EAAE,MADQ;AAEhBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,UAAAA,KAAK,EAAE,KAAKA,KAAL,CAAWC,KAAnB;AAA0BC,UAAAA,KAAK,EAAE,KAAKA,KAAL,CAAWD;AAA5C,SAAf,CAFU;AAGhBE,QAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACjB,0BAAgB;AADC,SAAZ;AAHO,OAApB;AAOAC,MAAAA,KAAK,CAAC,sDAAD,EAAyDV,WAAzD,CAAL,CACCW,IADD,CACM,UAAAC,QAAQ,EAAI;AACd,YAAGA,QAAQ,CAACC,EAAZ,EAAe;AACX,iBAAOD,QAAQ,CAACE,IAAT,EAAP;AACH,SAFD,MAEK;AACD,gBAAM,IAAIC,KAAJ,CAAU,gCAAV,CAAN;AACH;AACJ,OAPD,EAQCJ,IARD,CAQM,UAAAK,KAAK,EAAI;AACXC,QAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCF,KAAnC;;AACA,QAAA,MAAI,CAACtB,KAAL,CAAWF,OAAX,CAAmB2B,IAAnB,CAAwB,UAAxB;AACH,OAXD,EAYCC,KAZD,CAYO,UAAAC,KAAK,EAAI;AACZ,QAAA,MAAI,CAACC,QAAL,CAAc;AAACzB,UAAAA,GAAG,EAAEwB,KAAK,CAACE;AAAZ,SAAd;AACH,OAdD;AAeH;;;6BACO;AAAA;;AACJ,aACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,KAAK3B,KAAL,CAAWC,GAAlB,CADJ,EAEI;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFJ,EAGI;AAAM,QAAA,QAAQ,EAAE,KAAK2B,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,GAAG,EAAE,aAACC,KAAD;AAAA,iBAAW,MAAI,CAACrB,KAAL,GAAaqB,KAAxB;AAAA,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,GAAG,EAAE,aAACA,KAAD;AAAA,iBAAW,MAAI,CAACnB,KAAL,GAAamB,KAAxB;AAAA,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGI;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,KAAK,EAAC,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHJ,CAHJ,CADJ;AAWH;;;;EA/C8BnC,S;;SAAdE,K","sourcesContent":["import React, { Component } from 'react';\r\nimport { history } from 'react-router-dom';\r\n\r\nexport default class Login extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        if(this.props.location.state){\r\n            this.state = {msg: this.props.location.state.msg};\r\n        }else{\r\n            this.state = {msg: ''};\r\n        }\r\n        \r\n    }\r\n    envia(event){\r\n        event.preventDefault();\r\n        const requestInfo = {\r\n            method: 'POST',\r\n            body: JSON.stringify({login: this.login.value, senha: this.senha.value}),\r\n            headers: new Headers({\r\n                'Content-type': 'application/json'\r\n            })\r\n        };\r\n        fetch('https://instalura-api.herokuapp.com/api/public/login', requestInfo)\r\n        .then(response => {\r\n            if(response.ok){\r\n                return response.text();\r\n            }else{\r\n                throw new Error('não foi possível fazer o login');\r\n            }\r\n        })\r\n        .then(token => {\r\n            localStorage.setItem('auth-token', token);\r\n            this.props.history.push('timeline');\r\n        })\r\n        .catch(error => {\r\n            this.setState({msg: error.message});\r\n        });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"login-box\">\r\n                <span>{this.state.msg}</span>\r\n                <h1 className=\"header-logo\">Instalura</h1>\r\n                <form onSubmit={this.envia.bind(this)}>\r\n                    <input type=\"text\" ref={(input) => this.login = input}/>\r\n                    <input type=\"password\" ref={(input) => this.senha = input}/>\r\n                    <input type=\"submit\" value=\"Login\"/>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}